<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container mt-2 text-center">
        <button id="startFunction" class="btn btn-primary mb-2">Invoke Server Function</button>
        <button id="clearCache" class="btn btn-warning mb-2">Clear Cache</button> <!-- Added this line -->
        <ul id="logList" class="list-group"></ul>
    </div>

    <!-- Bootstrap 5 JS, Popper.js and custom JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"></script>
    <script>


      function addToLogList(message, type) {
        const now = new Date();
        const timeString = `${String(now.getDate()).padStart(2, '0')}:${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;

        const listItem = `<li class="list-group-item list-group-item-${type}"><small class="text-muted">${timeString}</small> ${message}</li>`;

        // Add to the top of the list
        $("#logList").prepend(listItem);

        // Truncate list to 20 items
        while($("#logList li").length > 20) {
            $("#logList li:last-child").remove();
        }
      }

      <?!= include("client"); ?>

      const server = createLogServer( (mesg) => addToLogList(mesg) ) ;

      $(document).ready(function() {
        $("#startFunction").click(function() {
          server.longRunningFunction('arg1', 'arg2');
        });

        $("#clearCache").click(function() { // Added this block
          google.script.run.clearCache();
        });
      });


    </script>
</body>
</html>
